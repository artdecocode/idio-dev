{"version":3,"sources":["../../src/browserify/watch.js"],"names":["path","output","options","babelifyOptions","ignore","exclude","p","o","babel","babelify","configure","b","entries","cache","packageCache","plugin","watchify","debug","transform","extensions","on","bundle","console","log","message","pipe"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;eAEe,CAAC;AACdA,MADc;AACRC,QADQ;AACAC,YAAU,EADV;AACcC,oBAAkB,EADhC;AAEdC,QAFc;AAENC;AAFM,CAAD,KAGT;AACJ,QAAMC,IAAI,oBAAS,EAAT,EAAaN,IAAb,CAAV;AACA,QAAMO,IAAI,oBAAS,EAAT,EAAaN,MAAb,CAAV;;AACA,QAAMO,QAAQC,kBAASC,SAAT,CAAmBP,eAAnB,CAAd;;AAEA,QAAMQ,IAAI,yBAAW;AACnBC,aAAS,CAACZ,IAAD,CADU;AAEnBa,WAAO,EAFY;AAGnBC,kBAAc,EAHK;AAInBC,YAAQ,CAACC,iBAAD,CAJW;AAKnBC,WAAO,IALY;AAMnBC,eAAW,CAACV,KAAD,CANQ;AAOnBW,gBAAY,CAAC,MAAD,CAPO;AAQnB,OAAGjB;AARgB,GAAX,CAAV;AAWAS,IACGS,EADH,CACM,QADN,EACgBC,MADhB,EAEGD,EAFH,CAEM,QAFN,EAEgB,MAAM;AAClBE,YAAQC,GAAR,CAAY,oBAAZ,EAAkCjB,CAAlC,EAAqCC,CAArC;AACD,GAJH;AAMA,MAAIH,MAAJ,EAAYO,EAAEP,MAAF,CAASA,MAAT;AACZ,MAAIC,OAAJ,EAAaM,EAAEN,OAAF,CAAUA,OAAV;AAEbgB;;AAEA,WAASA,MAAT,GAAkB;AAChBV,MAAEU,MAAF,GACGD,EADH,CACM,OADN,EACe,CAAC;AAAEI;AAAF,KAAD,KAAiB;AAC5BF,cAAQC,GAAR,CAAY,yBAAZ,EAAuCjB,CAAvC,EAA0CkB,OAA1C;AACD,KAHH,EAIGC,IAJH,CAIQ,2BAAkBxB,MAAlB,CAJR;AAKD;AACF,C","sourcesContent":["import browserify from 'browserify'\nimport babelify from 'babelify'\nimport watchify from 'watchify'\nimport { createWriteStream } from 'fs'\nimport { relative } from 'path'\n\nexport default ({\n  path, output, options = {}, babelifyOptions = {},\n  ignore, exclude,\n}) => {\n  const p = relative('', path)\n  const o = relative('', output)\n  const babel = babelify.configure(babelifyOptions)\n\n  const b = browserify({\n    entries: [path],\n    cache: {},\n    packageCache: {},\n    plugin: [watchify],\n    debug: true,\n    transform: [babel],\n    extensions: ['.jsx'],\n    ...options,\n  })\n\n  b\n    .on('update', bundle)\n    .on('bundle', () => {\n      console.log('â‡¢ %s bundled to %s', p, o)\n    })\n\n  if (ignore) b.ignore(ignore)\n  if (exclude) b.exclude(exclude)\n\n  bundle()\n\n  function bundle() {\n    b.bundle()\n      .on('error', ({ message }) => {\n        console.log('[!] %s bundle error: %s', p, message)\n      })\n      .pipe(createWriteStream(output))\n  }\n}\n"],"file":"watch.js"}